<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Counter</title>
    <link rel="stylesheet" href="/css/bootstrap-4.5.0.min.css">

    <script src="/js/jquery-3.5.1.min.js"></script>
    <script src="/js/bootstrap-4.5.0.min.js"></script>

    <script src="/js/axios-0.19.2.min.js"></script>
    <script src="/js/vue-2.6.11.js"></script>

</head>
<body style="height: 100%">
<div id="app"></div>

<script>
       new Vue({
          el:'#app',
          template:`
              <div style="background-image:url('fundo.jpg');min-height: 100vh; background-position: center; background-size:cover; width:100%">

                <ul style="width: 100%;display: grid;padding: 1rem;grid-gap: 1rem; grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));">
                    <li :key="values" v-for="item in values" style="display: block; border: solid 2px white; padding: 1em; border-radius: 30px;">
                        <h1 style="font-size: 64px !important; color:white"> {{ item["label"] }} </h1>
                        <h2 style="font-size: 32px !important; color:white"> Entrou: {{ item["enter"] }} </h1>
                        <h2 style="font-size: 32px !important; color:white"> Saiu: {{ item["exit"] }} </h1>
                        <h2 style="font-size: 32px !important; color:white"> Dentro: {{ item["enter"] - item["exit"] }} </h1>
                        <button  type="submit" @click="submitProduct" class="btn btn-outline-danger">Reset</button>
                    </li>
                </ul>
              </div>`,
          data: {
              values: [],
              displayUpdate: 0
          },
          methods: { // PLANO > alterar dados individuais para o json, substituir o display por um for com os dados

             getDados:function(){
           
               var self = this;
               axios.get('/counting')
               .then((response) => {
                  console.log(response);
                  self.values = response.data
                  self.displayUpdate = self.displayUpdate + 1
                  updateDisplay()
                  // self.styleObject.color = response.data["total"]["color"] // pegar de um config.json
               }, (error) => {
                console.log(error);
               });
             },
             //BOTAO POST
             submitProduct: function () {
               var self = this;
               axios.post('/reset',)
               .then((response) => {
               self.getDados();
               }, (error) => {
               console.log(error);
               });
            },

               // assuming your response payload is in a data objec

            },
            mounted: function () {
<!--                setInterval(this.getmaxx, 1000);-->
                setInterval(this.getDados, 1000);

          }   
            
      })     

</script>

</body>
</html>